local MainStorage = game:GetService('MainStorage')
local gg                = require(MainStorage.code.common.MGlobal)    ---@type gg
local SkillType      = require(MainStorage.code.common.config_type.SkillType)    ---@type SkillType

---@class SkillTree
local SkillTree = ClassMgr.Class("SkillTree")

function SkillTree:OnInit()
    self.skills = {} ---@type SkillType[][] 二维数组，每行代表一个层级的技能
    self.mainSkill = nil ---@type SkillType 入口技能
end

function SkillTree:SetSkillAt(x, y, skillType)
    if not self.skills[y] then
        self.skills[y] = {}
    end
    self.skills[y][x] = skillType
end

function SkillTree:GetLane(lane)
    return self.skills[lane] or {}
end

function SkillTree:Print()
    local ClientScheduler = require(MainStorage.code.client.ClientScheduler)
    local output = "========== 技能树结构 ==========\n"
    
    -- 获取最大层级数
    local maxLane = 0
    for lane, _ in pairs(self.skills) do
        maxLane = math.max(maxLane, lane)
    end
    
    -- 竖向显示技能树
    for lane = 0, maxLane do
        local laneSkills = self:GetLane(lane)
        if #laneSkills > 0 then
            output = output .. string.format("第%d层: ", lane + 1)
            local skillNames = {}
            for _, skill in ipairs(laneSkills) do
                if skill then
                    table.insert(skillNames, skill.name)
                end
            end
            output = output .. table.concat(skillNames, ", ") .. "\n"
        end
    end
    
    output = output .. "========== 技能树结构结束 =========="
    
    -- 使用ClientScheduler延迟打印
    ClientScheduler.add(function()
        print(output)
    end, 0.1) -- 延迟0.1秒打印
end

-- 递归构建技能树
local function BuildSkillTreeRecursive(skillType, currentLane, currentIndex, skillTree)
    if not skillType then return end
    
    -- 设置当前技能在树中的位置
    skillTree:SetSkillAt(currentIndex, currentLane, skillType)
    
    -- 如果是入口技能，保存为主技能
    if skillType.isEntrySkill then
        skillTree.mainSkill = skillType
    end
    
    -- 如果有下一技能，递归处理
    if skillType.nextSkills then
        for i, nextSkill in ipairs(skillType.nextSkills) do
            BuildSkillTreeRecursive(nextSkill, currentLane + 1, i, skillTree)
        end
    end
end

--- 技能配置文件
---@class SkillTypeConfig
local SkillTypeConfig = {}
local entrySkills = {} ---@type SkillType[]
local loaded = false

local function LoadConfig()
    SkillTypeConfig.config ={
    ["丰收葵"] = SkillType.New({
        ["技能名"] = "丰收葵",
        ["显示名"] = "丰收葵",
        ["最大等级"] = 1,
        ["技能图标"] = "sandboxId://textures/plants/Tex_向日葵_BaseColor.png",
        ["技能品级"] = "UR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "0",
        ["下一技能"] = {
            "伤害强化",
            "射速增加",
            "丰收葵_阳光产量提升"
        },
        ["无需装备也可生效"] = false,
        ["主动释放魔法"] = "丰收葵_阳光获取",
        ["目标模式"] = "自己",
        ["位置偏移"] = {
            0,
            0,
            0
        },
        ["启用后坐力"] = false,
        ["更改模型"] = "resId&usev2=1://392900345901232137",
        ["更改动画"] = "resId&usev2=1://392900387118657545",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["丰收葵_阳光产量提升"] = SkillType.New({
        ["技能名"] = "丰收葵_阳光产量提升",
        ["显示名"] = "阳光产量提升",
        ["最大等级"] = 10,
        ["实际描述"] = "白天的阳光产量提升",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/阳光提升.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "30*clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "丰收葵_阳光产量提升_词条"
        },
        ["一键强化素材"] = {
            ["阳光"] = "8*(144000*1.1^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "8*(144000*1.1^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["伤害强化"] = SkillType.New({
        ["技能名"] = "伤害强化",
        ["显示名"] = "攻击提升",
        ["最大等级"] = 10,
        ["实际描述"] = "所有植物造成的伤害提升",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "30*clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "伤害强化_词条"
        },
        ["一键强化素材"] = {
            ["阳光"] = "8*(144000*1.1^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "8*(144000*1.1^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["射速增加"] = SkillType.New({
        ["技能名"] = "射速增加",
        ["显示名"] = "射速增加",
        ["最大等级"] = 10,
        ["实际描述"] = "所有植物的射速增加",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/冷却提升.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "30*clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "射速增加_词条"
        },
        ["一键强化素材"] = {
            ["阳光"] = "8*(144000*1.1^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "8*(144000*1.1^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["向日葵"] = SkillType.New({
        ["技能名"] = "向日葵",
        ["显示名"] = "向日葵",
        ["最大等级"] = 1,
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 0,
        ["下一技能"] = {
            "向日葵_阳光产量提升",
            "向日葵_额外掉落阳光"
        },
        ["无需装备也可生效"] = false,
        ["主动释放魔法"] = "向日葵_阳光获取",
        ["目标模式"] = "自己",
        ["位置偏移"] = {
            0,
            0,
            0
        },
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["产量增加_额外概率提升"] = SkillType.New({
        ["技能名"] = "产量增加_额外概率提升",
        ["显示名"] = "额外收获概率",
        ["最大等级"] = 10,
        ["实际描述"] = "阳光产量增加，击败僵尸后额外获得阳光概率提升",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/掉率提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "20*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "丰收葵"
        },
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "产量增加_额外概率提升_词条"
        },
        ["一键强化素材"] = {
            ["阳光"] = "15*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+8*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "15*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+8*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["伤害提升_产量增加"] = SkillType.New({
        ["技能名"] = "伤害提升_产量增加",
        ["显示名"] = "攻击提升",
        ["最大等级"] = 10,
        ["实际描述"] = [[所有植物造成的伤害提升
白天的阳光产量提升 ]],
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "20*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "丰收葵"
        },
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "伤害提升_产量增加_词条"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+5*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["向日葵_阳光产量提升"] = SkillType.New({
        ["技能名"] = "向日葵_阳光产量提升",
        ["显示名"] = "阳光产量提升",
        ["最大等级"] = 10,
        ["实际描述"] = "白天的阳光产量提升",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/阳光提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "向日葵_阳光产量提升2"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "向日葵_阳光产量提升_词条"
        },
        ["一键强化素材"] = {
            ["阳光"] = "15*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+15*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "15*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+15*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["向日葵_阳光产量提升2"] = SkillType.New({
        ["技能名"] = "向日葵_阳光产量提升2",
        ["显示名"] = "阳光产量提升",
        ["最大等级"] = 10,
        ["实际描述"] = "白天的阳光产量提升",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/阳光提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "伤害提升_产量增加",
            "产量增加_额外概率提升"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "向日葵_阳光产量提升2_词条"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["向日葵_额外掉落阳光"] = SkillType.New({
        ["技能名"] = "向日葵_额外掉落阳光",
        ["显示名"] = "额外收获概率",
        ["最大等级"] = 10,
        ["实际描述"] = "夜晚击败僵尸后额外获得阳光的几率提升",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/掉率提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "向日葵_阳光产量提升2"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "向日葵_额外获得阳光_词条"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["大喷菇"] = SkillType.New({
        ["技能名"] = "大喷菇",
        ["显示名"] = "大喷菇",
        ["最大等级"] = 0,
        ["技能图标"] = "sandboxId://textures/plants/Tex_大喷菇_BaseColor.png",
        ["技能品级"] = "UR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "0",
        ["下一技能"] = {
            "持续伤害_大喷菇",
            "攻击1_大喷菇"
        },
        ["无需装备也可生效"] = false,
        ["主动释放魔法"] = "大喷菇_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://392917574428553218",
        ["更改动画"] = "resId&usev2=1://392857678152609801",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "大喷菇_伤害",
        ["对应的召唤物"] = nil
    }),
    ["持续伤害_大喷菇"] = SkillType.New({
        ["技能名"] = "持续伤害_大喷菇",
        ["显示名"] = "持续伤害提升",
        ["最大等级"] = 10,
        ["实际描述"] = "持续伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_大喷菇_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/大攻击提升.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "40*clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "持续伤害_词条_大喷菇"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(144000*1.1^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["攻击1_大喷菇"] = SkillType.New({
        ["技能名"] = "攻击1_大喷菇",
        ["显示名"] = "攻击提升",
        ["最大等级"] = 20,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_大喷菇_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "40*clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_胆小菇"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(144000*1.1^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["小喷菇"] = SkillType.New({
        ["技能名"] = "小喷菇",
        ["显示名"] = "小喷菇",
        ["最大等级"] = 1,
        ["技能图标"] = "sandboxId://textures/plants/Tex_小喷菇_BaseColor.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "0",
        ["下一技能"] = {
            "射速1_小喷菇",
            "攻击1_小喷菇",
            "生命1_小喷菇"
        },
        ["无需装备也可生效"] = false,
        ["主动释放魔法"] = "小喷菇_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://393245666346938370",
        ["更改动画"] = "resId&usev2=1://393245701927219206",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.75,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "小喷菇_伤害",
        ["对应的召唤物"] = nil
    }),
    ["射速1_小喷菇"] = SkillType.New({
        ["技能名"] = "射速1_小喷菇",
        ["显示名"] = "射速提升",
        ["最大等级"] = 10,
        ["实际描述"] = "射速增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_小喷菇_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/冷却提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "胆小菇"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "射速1_词条_小喷菇"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["攻击1_小喷菇"] = SkillType.New({
        ["技能名"] = "攻击1_小喷菇",
        ["显示名"] = "攻击提升",
        ["最大等级"] = 10,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_小喷菇_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "胆小菇"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_小喷菇"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["生命1_小喷菇"] = SkillType.New({
        ["技能名"] = "生命1_小喷菇",
        ["显示名"] = "生命提升",
        ["最大等级"] = 10,
        ["实际描述"] = "生命增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_小喷菇_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/生命提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "生命1_词条_小喷菇"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["胆小菇"] = SkillType.New({
        ["技能名"] = "胆小菇",
        ["显示名"] = "胆小菇",
        ["最大等级"] = 0,
        ["技能图标"] = "sandboxId://textures/plants/Tex_胆小菇_BaseColor.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "0",
        ["下一技能"] = {
            "攻击1_胆小菇",
            "持续伤害_胆小菇"
        },
        ["无需装备也可生效"] = false,
        ["主动释放魔法"] = "胆小菇_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://393246789929676800",
        ["更改动画"] = "resId&usev2=1://393246832124375044",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.7,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "胆小菇_伤害",
        ["对应的召唤物"] = nil
    }),
    ["持续伤害_胆小菇"] = SkillType.New({
        ["技能名"] = "持续伤害_胆小菇",
        ["显示名"] = "持续伤害提升",
        ["最大等级"] = 10,
        ["实际描述"] = "持续伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_胆小菇_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/大攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "20*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "大喷菇"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "持续伤害_词条_胆小菇"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+10*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["攻击1_胆小菇"] = SkillType.New({
        ["技能名"] = "攻击1_胆小菇",
        ["显示名"] = "攻击提升",
        ["最大等级"] = 10,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_胆小菇_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "20*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "大喷菇"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_胆小菇"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+10*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["减速1_寒冰射手"] = SkillType.New({
        ["技能名"] = "减速1_寒冰射手",
        ["显示名"] = "减速时间增加",
        ["最大等级"] = 10,
        ["实际描述"] = "减速持续时间增加",
        ["技能图标"] = "sandboxId://textures/plants/寒冰射手.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/速度结束.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "寒冰加特林"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "减速1_词条_寒冰射手"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["攻击1_寒冰射手"] = SkillType.New({
        ["技能名"] = "攻击1_寒冰射手",
        ["显示名"] = "伤害增加",
        ["最大等级"] = 10,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/寒冰射手.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "寒冰加特林"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_寒冰射手"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["生命1_寒冰射手"] = SkillType.New({
        ["技能名"] = "生命1_寒冰射手",
        ["显示名"] = "生命增加",
        ["最大等级"] = 10,
        ["实际描述"] = "生命增加",
        ["技能图标"] = "sandboxId://textures/plants/寒冰射手.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/生命提升.png",
        ["技能品级"] = "UR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "寒冰加特林"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "生命1_词条_寒冰射手"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["寒冰射手"] = SkillType.New({
        ["技能名"] = "寒冰射手",
        ["显示名"] = "寒冰射手",
        ["最大等级"] = 1,
        ["技能详细"] = "击中伤害： [寒冰射手-伤害.属性增伤.1]",
        ["技能图标"] = "sandboxId://textures/plants/寒冰射手.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "0",
        ["下一技能"] = {
            "减速1_寒冰射手",
            "攻击1_寒冰射手",
            "生命1_寒冰射手"
        },
        ["无需装备也可生效"] = false,
        ["主动释放魔法"] = "寒冰射手_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://392874194726170629",
        ["更改动画"] = "resId&usev2=1://394271398686781446",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.6,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "寒冰射手-伤害",
        ["对应的召唤物"] = nil
    }),
    ["寒冰加特林"] = SkillType.New({
        ["技能名"] = "寒冰加特林",
        ["显示名"] = "寒冰加特林",
        ["最大等级"] = 1,
        ["技能图标"] = "sandboxId://textures/plants/寒冰加特林.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "5",
        ["下一技能"] = {
            "攻击1_寒冰加特林",
            "减速1_寒冰加特林"
        },
        ["无需装备也可生效"] = false,
        ["一键强化素材"] = {
            ["阳光"] = "10379"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10379"
        },
        ["主动释放魔法"] = "寒冰加特林_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://393243920572772360",
        ["更改动画"] = "resId&usev2=1://393243961588871169",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "寒冰加特林-伤害",
        ["对应的召唤物"] = nil
    }),
    ["冷冻1_寒冰加特林"] = SkillType.New({
        ["技能名"] = "冷冻1_寒冰加特林",
        ["显示名"] = "冷冻概率增加",
        ["最大等级"] = 10,
        ["实际描述"] = "造成冷冻的概率提升",
        ["技能图标"] = "sandboxId://textures/plants/寒冰加特林.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/爆炸提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "10*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "火焰豌豆"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "冷冻1_词条_寒冰加特林"
        },
        ["一键强化素材"] = {
            ["阳光"] = "11*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "11*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["减速1_寒冰加特林"] = SkillType.New({
        ["技能名"] = "减速1_寒冰加特林",
        ["显示名"] = "减速持续时间增加",
        ["最大等级"] = 10,
        ["实际描述"] = "减速持续时间增加",
        ["技能图标"] = "sandboxId://textures/plants/寒冰加特林.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/速度结束.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "10*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "冷冻1_寒冰加特林"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "减速1_词条_寒冰加特林"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["持续伤害_寒冰加特林"] = SkillType.New({
        ["技能名"] = "持续伤害_寒冰加特林",
        ["显示名"] = "持续伤害增加",
        ["最大等级"] = 10,
        ["实际描述"] = "持续伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/寒冰加特林.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/大攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "10*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "火焰豌豆"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "持续伤害_词条_寒冰加特林"
        },
        ["一键强化素材"] = {
            ["阳光"] = "11*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "11*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["攻击1_寒冰加特林"] = SkillType.New({
        ["技能名"] = "攻击1_寒冰加特林",
        ["显示名"] = "伤害增加",
        ["最大等级"] = 10,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/寒冰加特林.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "10*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "持续伤害_寒冰加特林"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_寒冰加特林"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*((1−min(1,max(0,LVL−4)))*9000*1.3^LVL+min(1,max(0,LVL−4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["火焰豌豆"] = SkillType.New({
        ["技能名"] = "火焰豌豆",
        ["显示名"] = "火焰豌豆",
        ["最大等级"] = 1,
        ["实际描述"] = "连发火焰攻击，造成DamageAmplifier范围伤害，点燃并造成共DamageAmplifier伤害",
        ["技能图标"] = "sandboxId://textures/plants/火焰豌豆.png",
        ["技能品级"] = "UR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "5",
        ["下一技能"] = {
            "攻击1_火焰豌豆"
        },
        ["无需装备也可生效"] = false,
        ["一键强化素材"] = {
            ["阳光"] = "5000000"
        },
        ["升级需求素材"] = {
            ["阳光"] = "5000000"
        },
        ["主动释放魔法"] = "火焰豌豆_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://394736824705232900",
        ["更改动画"] = "resId&usev2=1://394736861334089731",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.7,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "火焰豌豆-伤害",
        ["对应的召唤物"] = nil
    }),
    ["攻击1_火焰豌豆"] = SkillType.New({
        ["技能名"] = "攻击1_火焰豌豆",
        ["显示名"] = "伤害增加",
        ["最大等级"] = 10,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/火焰豌豆.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "100*clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_火焰豌豆"
        },
        ["一键强化素材"] = {
            ["阳光"] = "20*(144000*1.1^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(144000*1.1^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["三头豌豆"] = SkillType.New({
        ["技能名"] = "三头豌豆",
        ["显示名"] = "三头豌豆",
        ["最大等级"] = 2,
        ["技能图标"] = "sandboxId://textures/plants/Tex_三线射手_BaseColor.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "100*clamp(LVL-3,2,1)",
        ["无需装备也可生效"] = false,
        ["一键强化素材"] = {
            ["阳光"] = "180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*80"
        },
        ["升级需求素材"] = {
            ["阳光"] = "180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*80"
        },
        ["主动释放魔法"] = "三头豌豆_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://392880050595328000",
        ["更改动画"] = "resId&usev2=1://394316194793009156",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.7,
            0.7,
            0.7
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "三头豌豆-伤害",
        ["对应的召唤物"] = nil
    }),
    ["射速1_三头豌豆"] = SkillType.New({
        ["技能名"] = "射速1_三头豌豆",
        ["显示名"] = "射速增加",
        ["最大等级"] = 10,
        ["技能图标"] = "sandboxId://textures/plants/Tex_三线射手_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/冷却提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "20",
        ["下一技能"] = {
            "机枪射手"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "射速1_词条_三头豌豆"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["高速射手"] = SkillType.New({
        ["技能名"] = "高速射手",
        ["显示名"] = "高速射手",
        ["最大等级"] = 1,
        ["实际描述"] = "发射二枚豌豆，可穿透一名敌人，造成DamageAmplifier伤害",
        ["技能详细"] = "击中伤害： [高速射手-伤害.属性增伤.1]",
        ["技能图标"] = "sandboxId://textures/plants/Tex_双发射手_BaseColor.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "5",
        ["下一技能"] = {
            "射速1_高速射手"
        },
        ["无需装备也可生效"] = false,
        ["一键强化素材"] = {
            ["阳光"] = "3600000"
        },
        ["升级需求素材"] = {
            ["阳光"] = "3600000"
        },
        ["主动释放魔法"] = "高速射手_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://392876535890194438",
        ["更改动画"] = "resId&usev2=1://394271398686781446",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "高速射手-伤害",
        ["对应的召唤物"] = nil
    }),
    ["射速1_高速射手"] = SkillType.New({
        ["技能名"] = "射速1_高速射手",
        ["显示名"] = "射速增加",
        ["最大等级"] = 10,
        ["实际描述"] = "射速增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_双发射手_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/冷却提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "50*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "三头豌豆"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "射速1_词条_高速射手"
        },
        ["一键强化素材"] = {
            ["阳光"] = "20*(144000*1.1^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(144000*1.1^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["机枪射手"] = SkillType.New({
        ["技能名"] = "机枪射手",
        ["显示名"] = "机枪射手",
        ["最大等级"] = 1,
        ["技能详细"] = "击中伤害： [高速加特林-伤害.属性增伤.1]",
        ["技能图标"] = "sandboxId://textures/plants/机枪加特林.png",
        ["技能品级"] = "UR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "5",
        ["下一技能"] = {
            "射速1_高速加特林"
        },
        ["无需装备也可生效"] = false,
        ["主动释放魔法"] = "高速加特林_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://392875219302363139",
        ["更改动画"] = "resId&usev2=1://394271398686781446",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "高速加特林-伤害",
        ["对应的召唤物"] = nil
    }),
    ["射速1_高速加特林"] = SkillType.New({
        ["技能名"] = "射速1_高速加特林",
        ["显示名"] = "射速增加",
        ["最大等级"] = 10,
        ["技能图标"] = "sandboxId://textures/plants/机枪加特林.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/冷却提升.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "2",
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "射速1_词条_高速加特林"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["射速1_双头豌豆"] = SkillType.New({
        ["技能名"] = "射速1_双头豌豆",
        ["显示名"] = "射速增加",
        ["最大等级"] = 10,
        ["实际描述"] = "射速增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_裂荚射手_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/冷却提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "20*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "高速射手"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "射速1_词条_双头豌豆"
        },
        ["一键强化素材"] = {
            ["阳光"] = "20*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+10*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+10*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["攻击1_双头豌豆"] = SkillType.New({
        ["技能名"] = "攻击1_双头豌豆",
        ["显示名"] = "伤害增加",
        ["最大等级"] = 10,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_裂荚射手_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "20*clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "高速射手"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_双头豌豆"
        },
        ["一键强化素材"] = {
            ["阳光"] = "20*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+10*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(1-min(1,max(0,LVL-4)))*9000*1.3^LVL+10*(min(1,max(0,LVL-4))*6000*1.45^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["双头豌豆"] = SkillType.New({
        ["技能名"] = "双头豌豆",
        ["显示名"] = "双头豌豆",
        ["最大等级"] = 1,
        ["技能详细"] = "击中伤害： [双头豌豆-伤害.属性增伤.1]",
        ["技能图标"] = "sandboxId://textures/plants/Tex_裂荚射手_BaseColor.png",
        ["技能品级"] = "UR",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "5",
        ["下一技能"] = {
            "射速1_双头豌豆",
            "攻击1_双头豌豆"
        },
        ["无需装备也可生效"] = false,
        ["一键强化素材"] = {
            ["阳光"] = "10379"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10379"
        },
        ["主动释放魔法"] = "双头豌豆_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0,
            ["最大垂直后坐力"] = 0,
            ["垂直后坐力恢复"] = 0,
            ["水平后坐力"] = 0.2,
            ["最大水平后坐力"] = 0,
            ["水平后坐力恢复"] = 0,
            ["后坐力冷却时间"] = 0
        },
        ["更改模型"] = "resId&usev2=1://392860436549218310",
        ["更改动画"] = "resId&usev2=1://392860497052053508",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "双头豌豆-伤害",
        ["对应的召唤物"] = nil
    }),
    ["射速1_豌豆"] = SkillType.New({
        ["技能名"] = "射速1_豌豆",
        ["显示名"] = "射速增加",
        ["最大等级"] = 10,
        ["实际描述"] = "射速增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_豌豆射手_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/冷却提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "双头豌豆"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "射速1_词条_豌豆射手"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["攻击1_豌豆"] = SkillType.New({
        ["技能名"] = "攻击1_豌豆",
        ["显示名"] = "伤害增加",
        ["最大等级"] = 10,
        ["实际描述"] = "伤害增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_豌豆射手_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/攻击提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "双头豌豆"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "攻击1_词条_豌豆射手"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["生命1_豌豆"] = SkillType.New({
        ["技能名"] = "生命1_豌豆",
        ["显示名"] = "生命增加",
        ["最大等级"] = 10,
        ["实际描述"] = "生命增加",
        ["技能图标"] = "sandboxId://textures/plants/Tex_豌豆射手_BaseColor.png",
        ["技能小角标"] = "sandboxId://textures/ui/主界面UI/主副卡界面/主卡界面/生命提升.png",
        ["技能品级"] = "R",
        ["是入口技能"] = false,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "clamp(LVL-3,2,1)",
        ["下一技能"] = {
            "双头豌豆"
        },
        ["无需装备也可生效"] = true,
        ["被动词条"] = {
            "生命1_词条_豌豆射手"
        },
        ["一键强化素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(1-min(1,max(0,LVL-4)))*120*1.65^LVL+10*(min(1,max(0,LVL-4))*180*1.5^LVL)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "敌人",
        ["启用后坐力"] = false,
        ["更改状态机"] = nil,
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            1,
            1,
            1
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["豌豆射手"] = SkillType.New({
        ["技能名"] = "豌豆射手",
        ["显示名"] = "豌豆射手",
        ["最大等级"] = 1,
        ["技能详细"] = "击中伤害： [豌豆射手-伤害.属性增伤.1]",
        ["技能图标"] = "sandboxId://textures/plants/Tex_豌豆射手_BaseColor.png",
        ["技能品级"] = "R",
        ["是入口技能"] = true,
        ["技能分类"] = 0,
        ["提升玩家等级"] = "5",
        ["下一技能"] = {
            "射速1_豌豆",
            "攻击1_豌豆",
            "生命1_豌豆"
        },
        ["无需装备也可生效"] = false,
        ["升级需求素材"] = {
            ["阳光"] = "10+(20*LVL)",
            ["金币"] = "10+(20*(LVL-10))",
            ["能量豆"] = "10+(20*(LVL-50))"
        },
        ["主动释放魔法"] = "豌豆射手_入口",
        ["目标模式"] = "敌人",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 0.2,
            ["最大垂直后坐力"] = 1,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 1,
            ["最大水平后坐力"] = 3,
            ["水平后坐力恢复"] = 6,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://392862228087451650",
        ["更改动画"] = "resId&usev2=1://394271398686781446",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.5,
            0.5,
            0.5
        },
        ["指示器半径"] = 3,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "豌豆射手-伤害",
        ["对应的召唤物"] = nil
    }),
    ["副-地刺"] = SkillType.New({
        ["技能名"] = "副-地刺",
        ["显示名"] = "地刺",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出地刺，使踩过的僵尸受到伤害。冷却30秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_地刺_BaseColor.png",
        ["技能品级"] = "R",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "max(0,min(2,2*(LVL-14)))+max(0,min(2,2*(LVL-24)))+max(0,min(4,4*LVL-4*34))+max(0,min(8,8*LVL-8*49))+max(0,min(16,16*LVL-16*69))+max(0,min(30,30*LVL-30*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-地刺-词条"
        },
        ["最大经验"] = "0.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["地刺碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "0.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "clamp(LVL-49,0,1)+max(0,LVL-70)"
        },
        ["主动释放魔法"] = "地刺_脉冲",
        ["目标模式"] = "位置",
        ["启用后坐力"] = false,
        ["更改模型"] = "resId&usev2=1://394719436391723011",
        ["更改动画"] = "resId&usev2=1://394720883862827011",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.5,
            0.5,
            0.5
        },
        ["指示器半径"] = 2,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["副-坚果"] = SkillType.New({
        ["技能名"] = "副-坚果",
        ["显示名"] = "坚果",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出坚果，持续吸引附近僵尸的注意力。持续最多20秒。冷却30秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_NutWall_BaseColor.png",
        ["技能品级"] = "R",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "max(0,min(2,2*(LVL-14)))+max(0,min(2,2*(LVL-24)))+max(0,min(4,4*LVL-4*34))+max(0,min(8,8*LVL-8*49))+max(0,min(16,16*LVL-16*69))+max(0,min(30,30*LVL-30*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-坚果-词条"
        },
        ["最大经验"] = "0.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["坚果碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "0.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)"
        },
        ["主动释放魔法"] = "副_召唤_坚果",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://393184908179288070",
        ["更改动画"] = "resId&usev2=1://393184227204673542",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副_坚果_伤害",
        ["对应的召唤物"] = "副-召唤物-坚果"
    }),
    ["副-樱桃炸弹"] = SkillType.New({
        ["技能名"] = "副-樱桃炸弹",
        ["显示名"] = "樱桃炸弹",
        ["最大等级"] = 100,
        ["实际描述"] = "投掷出樱桃炸弹，爆炸并造成大量范围伤害。冷却5秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_CherryBomb_BaseColor.png",
        ["技能品级"] = "R",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "max(0,min(2,2*(LVL-14)))+max(0,min(2,2*(LVL-24)))+max(0,min(4,4*LVL-4*34))+max(0,min(8,8*LVL-8*49))+max(0,min(16,16*LVL-16*69))+max(0,min(30,30*LVL-30*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-樱桃炸弹-词条"
        },
        ["最大经验"] = "0.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["樱桃炸弹碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "0.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)"
        },
        ["主动释放魔法"] = "副-樱桃炸弹-飞弹",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://392887257290387462",
        ["更改动画"] = "resId&usev2=1://392885363549548552",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.45,
            0.45,
            0.45
        },
        ["指示器半径"] = 2,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副_樱桃炸弹_飞弹_范围_伤害",
        ["对应的召唤物"] = nil
    }),
    ["副-菜问"] = SkillType.New({
        ["技能名"] = "副-菜问",
        ["显示名"] = "菜问",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出菜问近战攻击僵尸。持续最多20秒。冷却30秒。",
        ["技能图标"] = "sandboxId://textures/plants/菜问.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "max(0,min(2,2*(LVL-14)))+max(0,min(2,2*(LVL-24)))+max(0,min(4,4*LVL-4*34))+max(0,min(8,8*LVL-8*49))+max(0,min(16,16*LVL-16*69))+max(0,min(30,30*LVL-30*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            nil
        },
        ["最大经验"] = "0.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["菜问碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "0.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)"
        },
        ["主动释放魔法"] = "副_菜问召唤",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://387115964775428097",
        ["更改动画"] = "resId&usev2=1://385299156971958280",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = "副-召唤物-菜问"
    }),
    ["副-豌豆射手"] = SkillType.New({
        ["技能名"] = "副-豌豆射手",
        ["显示名"] = "豌豆射手",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出豌豆射手持续射击僵尸。持续最多20秒。冷却30秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_豌豆射手_BaseColor.png",
        ["技能品级"] = "R",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "max(0,min(2,2*(LVL-14)))+max(0,min(2,2*(LVL-24)))+max(0,min(4,4*LVL-4*34))+max(0,min(8,8*LVL-8*49))+max(0,min(16,16*LVL-16*69))+max(0,min(30,30*LVL-30*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-豌豆射手-词条"
        },
        ["最大经验"] = "0.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["豌豆射手碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "10*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "0.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)"
        },
        ["主动释放魔法"] = "副_召唤_豌豆射手",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://392862228087451650",
        ["更改动画"] = "resId&usev2=1://394271398686781446",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.65,
            0.65,
            0.65
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副_豌豆射手_伤害",
        ["对应的召唤物"] = "副-召唤物-豌豆射手"
    }),
    ["副-仙人掌"] = SkillType.New({
        ["技能名"] = "副-仙人掌",
        ["显示名"] = "仙人掌",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出仙人掌射击僵尸（可穿刺3次）。持续最多0秒。冷却40秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_仙人掌_BaseColor.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(3,3*(LVL-14)))+max(0,min(4,4*(LVL-24)))+max(0,min(8,8*LVL-8*34))+max(0,min(16,16*LVL-16*49))+max(0,min(32,32*LVL-32*69))+max(0,min(62,62*LVL-62*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-仙人掌-词条"
        },
        ["最大经验"] = "100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300",
        ["一键强化素材"] = {
            ["仙人掌碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60",
            ["能量豆"] = "clamp(LVL-49,0,21)"
        },
        ["主动释放魔法"] = "副_召唤_仙人掌",
        ["目标模式"] = "位置",
        ["启用后坐力"] = false,
        ["更改模型"] = "resId&usev2=1://387115774278529027",
        ["更改动画"] = "resId&usev2=1://385300362846941189",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副_仙人掌_伤害",
        ["对应的召唤物"] = "副-召唤物-仙人掌"
    }),
    ["副-椰子炮"] = SkillType.New({
        ["技能名"] = "副-椰子炮",
        ["显示名"] = "椰子炮",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出椰子炮发射炮弹造成范围伤害。持续最多40秒。冷却55秒。",
        ["技能图标"] = "sandboxId://textures/plants/椰子加农炮.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(3,3*(LVL-14)))+max(0,min(4,4*(LVL-24)))+max(0,min(8,8*LVL-8*34))+max(0,min(16,16*LVL-16*49))+max(0,min(32,32*LVL-32*69))+max(0,min(62,62*LVL-62*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-椰子炮-词条"
        },
        ["最大经验"] = "1*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["椰子炮碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "1*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "clamp(LVL-49,0,21)"
        },
        ["主动释放魔法"] = "副_召唤_椰子炮",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://387113709791752193",
        ["更改动画"] = "resId&usev2=1://385304081592381441",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 0.65,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "椰子炮_范围伤害",
        ["对应的召唤物"] = "副-召唤物-椰子炮"
    }),
    ["副-火爆辣椒"] = SkillType.New({
        ["技能名"] = "副-火爆辣椒",
        ["显示名"] = "火爆辣椒",
        ["最大等级"] = 100,
        ["实际描述"] = "投掷出火爆辣椒，大范围爆炸并点燃敌人。冷却40秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_火爆辣椒_BaseColor.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(3,3*(LVL-14)))+max(0,min(4,4*(LVL-24)))+max(0,min(8,8*LVL-8*34))+max(0,min(16,16*LVL-16*49))+max(0,min(32,32*LVL-32*69))+max(0,min(62,62*LVL-62*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-火爆辣椒-词条"
        },
        ["最大经验"] = "1*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["火爆辣椒碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "1*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "clamp(LVL-49,0,21)"
        },
        ["主动释放魔法"] = "副-火爆辣椒-飞弹",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://393157600622047241",
        ["更改动画"] = "resId&usev2=1://387819817577623560",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.7,
            0.7,
            0.7
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副-火爆辣椒-飞弹-范围-伤害",
        ["对应的召唤物"] = nil
    }),
    ["副-辣椒投手"] = SkillType.New({
        ["技能名"] = "副-辣椒投手",
        ["显示名"] = "辣椒投手",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出辣椒投手发射炮燃烧的辣椒造成持续伤害。持续最多40秒。冷却50秒。",
        ["技能图标"] = "sandboxId://textures/plants/辣椒投手.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(3,3*(LVL-14)))+max(0,min(4,4*(LVL-24)))+max(0,min(8,8*LVL-8*34))+max(0,min(16,16*LVL-16*49))+max(0,min(32,32*LVL-32*69))+max(0,min(62,62*LVL-62*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-辣椒投手-词条"
        },
        ["最大经验"] = "1*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["辣椒投手碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "1*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "clamp(LVL-49,0,21)"
        },
        ["主动释放魔法"] = "副_召唤_辣椒投手",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://387115673686519816",
        ["更改动画"] = "resId&usev2=1://385301511448719367",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.7,
            0.7,
            0.7
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副_辣椒投手_范围伤害",
        ["对应的召唤物"] = "副-召唤物-辣椒投手"
    }),
    ["副-钢铁地刺"] = SkillType.New({
        ["技能名"] = "副-钢铁地刺",
        ["显示名"] = "钢铁地刺",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出钢铁地刺，使踩过的僵尸受到伤害。冷却50秒。",
        ["技能图标"] = "sandboxId://textures/plants/地刺王.png",
        ["技能品级"] = "SR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(3,3*(LVL-14)))+max(0,min(4,4*(LVL-24)))+max(0,min(8,8*LVL-8*34))+max(0,min(16,16*LVL-16*49))+max(0,min(32,32*LVL-32*69))+max(0,min(62,62*LVL-62*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-钢铁地刺-词条"
        },
        ["最大经验"] = "1*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["钢铁地刺碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "20*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "1*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "clamp(LVL-49,0,21)"
        },
        ["主动释放魔法"] = "钢铁地刺_脉冲",
        ["目标模式"] = "位置",
        ["启用后坐力"] = false,
        ["更改模型"] = "resId&usev2=1://394726750205145090",
        ["更改动画"] = "resId&usev2=1://394727584292827145",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.3,
            0.3,
            0.3
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = nil
    }),
    ["副-星星果"] = SkillType.New({
        ["技能名"] = "副-星星果",
        ["显示名"] = "星星果",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出星星果，每秒会发射5颗星弹。冷却40秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_杨桃_BaseColor.png",
        ["技能品级"] = "SSR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(1,LVL-9))+max(0,min(4,4*(LVL-14)))+max(0,min(7,7*(LVL-24)))+max(0,min(14,14*LVL-14*34))+max(0,min(28,28*LVL-28*49))+max(0,min(56,56*LVL-56*69))+max(0,min(108,108*LVL-108*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-星星果-词条"
        },
        ["最大经验"] = "1.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["星星果碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "30*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "1.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "max(0,LVL-49)"
        },
        ["主动释放魔法"] = "副_召唤_星星果",
        ["目标模式"] = "位置",
        ["启用后坐力"] = false,
        ["更改模型"] = "resId&usev2=1://393160927141326851",
        ["更改动画"] = "resId&usev2=1://388107177653579778",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.65,
            0.65,
            0.65
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副_星星果_伤害",
        ["对应的召唤物"] = "副-召唤物-星星果"
    }),
    ["副-窝瓜"] = SkillType.New({
        ["技能名"] = "副-窝瓜",
        ["显示名"] = "窝瓜",
        ["最大等级"] = 100,
        ["实际描述"] = "投掷出窝瓜，使用后会对命中敌人造成大量范围伤害。冷却40秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_窝瓜_BaseColor.png",
        ["技能品级"] = "SSR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(1,LVL-9))+max(0,min(4,4*(LVL-14)))+max(0,min(7,7*(LVL-24)))+max(0,min(14,14*LVL-14*34))+max(0,min(28,28*LVL-28*49))+max(0,min(56,56*LVL-56*69))+max(0,min(108,108*LVL-108*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-窝瓜-词条"
        },
        ["最大经验"] = "1.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["窝瓜碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "30*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "1.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "max(0,LVL-49)"
        },
        ["主动释放魔法"] = "副_窝瓜_飞弹",
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://393160086296604681",
        ["更改动画"] = "resId&usev2=1://388101787855499267",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.6,
            0.6,
            0.6
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = "副_窝瓜_范围伤害",
        ["对应的召唤物"] = nil
    }),
    ["副-魅惑菇"] = SkillType.New({
        ["技能名"] = "副-魅惑菇",
        ["显示名"] = "魅惑菇",
        ["最大等级"] = 100,
        ["实际描述"] = "召唤出能魅惑敌人的魅惑菇。可控制附近生命小于“控制上限”的僵尸。冷却60秒。",
        ["技能图标"] = "sandboxId://textures/plants/Tex_迷惑菇_BaseColor.png",
        ["技能品级"] = "SSR",
        ["是入口技能"] = true,
        ["技能分类"] = 1,
        ["提升玩家等级"] = "1+max(0,min(1,LVL-9))+max(0,min(4,4*(LVL-14)))+max(0,min(7,7*(LVL-24)))+max(0,min(14,14*LVL-14*34))+max(0,min(28,28*LVL-28*49))+max(0,min(56,56*LVL-56*69))+max(0,min(108,108*LVL-108*69))",
        ["无需装备也可生效"] = false,
        ["被动词条"] = {
            "副-魅惑菇-词条"
        },
        ["最大经验"] = "1.5*(100*(1+LVL)+max(0,LVL-10)*200+max(0,LVL-25)*300+max(0,LVL-35)*300-max(0,LVL-70)*300)",
        ["一键强化素材"] = {
            ["魅惑菇碎片"] = "(1+max(0,min(1,LVL-9))+max(0,min(1,LVL-19))+max(0,min(1,LVL-29))+max(0,min(1,LVL-34))+max(0,min(1,LVL-39))+max(0,min(1,LVL-44))+max(0,min(1,LVL-49))+max(0,min(2,2*LVL-2*54))+max(0,min(2,2*LVL-2*59))+max(0,min(2,2*LVL-2*64))+max(0,min(2,2*LVL-2*69))+max(0,LVL-70))"
        },
        ["升级需求素材"] = {
            ["阳光"] = "30*(180+120*LVL+max(0,LVL-10)*240+max(0,LVL-15)*180-max(0,LVL-25)*60-max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["金币"] = "1.5*(max(0,LVL-9)*60-max(0,LVL-10)*30+max(0,LVL-15)*90+max(0,LVL-25)*60+max(0,LVL-35)*60+max(0,LVL-50)*60-max(0,LVL-70)*60)",
            ["能量豆"] = "max(0,LVL-49)"
        },
        ["主动释放魔法"] = nil,
        ["目标模式"] = "位置",
        ["启用后坐力"] = true,
        ["后坐力"] = {
            ["垂直后坐力"] = 3,
            ["最大垂直后坐力"] = 8,
            ["垂直后坐力恢复"] = 5,
            ["水平后坐力"] = 3,
            ["最大水平后坐力"] = 6,
            ["水平后坐力恢复"] = 2,
            ["后坐力冷却时间"] = 0.5
        },
        ["更改模型"] = "resId&usev2=1://393181803270254594",
        ["更改动画"] = "resId&usev2=1://393181510717550599",
        ["更改状态机"] = "植物",
        ["更改玩家尺寸"] = 1,
        ["副卡挂机尺寸"] = {
            0.5,
            0.5,
            0.5
        },
        ["指示器半径"] = 1.5,
        ["最大施法距离"] = 0,
        ["对应的伤害魔法"] = nil,
        ["对应的召唤物"] = "副-召唤物-魅惑菇"
    })
}loaded = true

--将SkillType的"下一技能"转换为SkillType
for _, skillType in pairs(SkillTypeConfig.config) do
    -- 收集入口技能
    if skillType.isEntrySkill then
        table.insert(entrySkills, skillType)
    end

    if skillType.nextSkills then
        local nextSkills = {}
        for _, skillName in ipairs(skillType.nextSkills) do
            local nextSkill = SkillTypeConfig.config[skillName]
            if nextSkill then
                table.insert(nextSkills, nextSkill)
                -- 将当前技能添加到下一技能的prerequisite列表中
                table.insert(nextSkill.prerequisite, skillType)
            else
                gg.log("技能配置错误：找不到下一技能 " .. skillName)
            end
        end
        skillType.nextSkills = nextSkills
    end
end
end

---@param name string
---@return SkillType
function SkillTypeConfig.Get(name)
    if not loaded then
        LoadConfig()
    end
    return SkillTypeConfig.config[name]
end

---@return SkillType[]
function SkillTypeConfig.GetAll()
    if not loaded then
        LoadConfig()
    end
    return SkillTypeConfig.config
end

---@return SkillType[]
function SkillTypeConfig.GetEntrySkills()
    if not loaded then
        LoadConfig()
    end
    return entrySkills
end

---获取技能树数据结构，按主卡分组
---@param skillCategory number 技能分类 (0=主卡, 1=副卡)
---@return table<string, SkillTree> 技能树映射表，key为主技能名称
function SkillTypeConfig.GetSkillTrees(skillCategory)
    if not loaded then
        LoadConfig()
    end

    local skillTrees = {} ---@type table<string, SkillTree>

    -- 遍历所有技能配置，找到指定分类的入口技能
    for skillName, skillType in pairs(SkillTypeConfig.config) do
        -- 筛选条件：是入口技能 且 属于指定分类
        if skillType.isEntrySkill and skillType.category == skillCategory then
            gg.log("构建技能树 - 找到主卡:", skillType.name, "分类:", skillCategory)

            -- 创建技能树结构
            local skillTree = SkillTree.New()
            
            -- 从入口技能开始递归构建技能树
            BuildSkillTreeRecursive(skillType, 0, 1, skillTree)

            -- 以主技能名称作为key存储技能树
            skillTrees[skillType.name] = skillTree
            gg.log("技能树构建完成:", skillType.name)
        end
    end

    return skillTrees
end

---打印技能树结构（美化输出）
---@param skillTrees table<string, SkillTree> 技能树映射表
function SkillTypeConfig.PrintSkillTrees(skillTrees)
    for mainSkillName, skillTree in pairs(skillTrees) do
        print("📋 主卡: " .. mainSkillName)
        skillTree:Print()
    end
end

return SkillTypeConfig
